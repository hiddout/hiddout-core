(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{568:function(t,e,n){"use strict";n.d(e,"c",function(){return c}),n.d(e,"b",function(){return i}),n.d(e,"d",function(){return u}),n.d(e,"a",function(){return s}),n.d(e,"e",function(){return l});n(204);var r=n(15),o=n(93),a=n(46),c=function(t){return function(e){e({type:r.s});var n=t?"?board=".concat(t):"";return hiddoutViewer.request("".concat(o.a.baseURL).concat(o.a.apiV1,"posts").concat(n),{method:"GET",headers:{"Content-Type":"application/json; charset=utf-8"}}).then(function(t){return Object(a.a)(t.status,e),e({type:r.g,payload:{posts:t.posts}})}).catch(function(t){console.error(t)})}},i=function(t){return function(e){return e({type:r.r}),hiddoutViewer.request("".concat(o.a.baseURL).concat(o.a.apiV1,"post/").concat(t),{method:"GET",headers:{"Content-Type":"application/json; charset=utf-8"}}).then(function(t){return Object(a.a)(t.status,e),e({type:r.f,payload:{post:t.post}})}).catch(function(t){console.error(t)})}},u=function(t){return function(e){return e({type:r.q}),hiddoutViewer.request("".concat(o.a.baseURL).concat(o.a.apiV1,"post/").concat(t,"/reactions"),{method:"GET",headers:{"Content-Type":"application/json; charset=utf-8"}}).then(function(t){return Object(a.a)(t.status,e),e({type:r.h,payload:{reactions:t.reactions}})}).catch(function(t){console.error(t)})}},s=function(t){return function(e){return e({type:r.q}),hiddoutViewer.request("".concat(o.a.baseURL).concat(o.a.apiV1,"post/").concat(t,"/comments"),{method:"GET",headers:{"Content-Type":"application/json; charset=utf-8"}}).then(function(t){return Object(a.a)(t.status,e),e({type:r.e,payload:{comments:t.comments}})}).catch(function(t){console.error(t)})}},l=function(t){return{type:r.p,payload:{level:t}}}},577:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return i}),n.d(e,"c",function(){return u});n(204);var r=n(15),o=n(93),a=n(46),c=function(t){return function(e,n){var c=n().auth;return e({type:r.w}),hiddoutViewer.request("".concat(o.a.baseURL).concat(o.a.apiV1,"posts"),{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8",authorization:c.token},body:JSON.stringify(t)}).then(function(t){return Object(a.a)(t.status,e),e({type:r.n,payload:{cratedPostId:t.insertedId}})}).catch(function(t){console.error(t)})}},i=function(t){return function(e,n){var c=n().auth;return e({type:r.v}),hiddoutViewer.request("".concat(o.a.baseURL).concat(o.a.apiV1,"post/").concat(t.postId,"/comments"),{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8",authorization:c.token},body:JSON.stringify(t)}).then(function(t){return Object(a.a)(t.status,e),e({type:r.d})}).catch(function(t){console.error(t)})}},u=function(t){return function(e,n){var c=n().auth;return e({type:r.x}),hiddoutViewer.request("".concat(o.a.baseURL).concat(o.a.apiV1,"post/").concat(t.postId,"/reactions"),{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8",authorization:c.token},body:JSON.stringify(t)}).then(function(t){return Object(a.a)(t.status,e),e({type:r.o})}).catch(function(t){console.error(t)})}}},578:function(t,e,n){"use strict";n(52),n(62),n(63),n(204),n(53),n(315),n(64),n(54),n(65),n(66),n(67),n(68),n(69);var r=n(0),o=n.n(r),a=n(550),c=n(540);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){function e(){var t,n,r,o,a,c,u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var p=arguments.length,f=new Array(p),h=0;h<p;h++)f[h]=arguments[h];return r=this,n=!(o=(t=s(e)).call.apply(t,[this].concat(f)))||"object"!==i(o)&&"function"!=typeof o?l(r):o,a=l(n),u={formData:""},(c="state")in a?Object.defineProperty(a,c,{value:u,enumerable:!0,configurable:!0,writable:!0}):a[c]=u,n}var n,r,f;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(e,o.a.Component),n=e,(r=[{key:"onTextAreaChange",value:function(t,e){var n=this.props.onChange;n&&n(t,e),this.setState({formData:e.value})}},{key:"onClick",value:function(){if(this.state.formData.length){var t=this.props.onClick;t(this.state.formData),this.setState({formData:""})}}},{key:"render",value:function(){var t=this.props,e=t.ButtonText,n=t.disabled;return o.a.createElement(a.a,{reply:!0},o.a.createElement(a.a.TextArea,{value:this.state.formData,onChange:this.onTextAreaChange.bind(this)}),o.a.createElement(c.a,{content:e,labelPosition:"left",icon:"edit",onClick:this.onClick.bind(this),disabled:n,primary:!0}))}}])&&u(n.prototype,r),f&&u(n,f),e}();e.a=f},680:function(t,e,n){"use strict";n.r(e);n(52),n(62),n(63),n(204),n(53),n(64),n(54),n(65),n(66),n(67),n(205),n(324),n(68),n(576),n(69),n(329);var r=n(0),o=n.n(r),a=n(686),c=n(684),i=n(586),u=n(587),s=n(540),l=n(571),p=n(579),f=n(687),h=n(572),m=n(568),d=n(577),y=n(111),b=n(28),g=n(578),v=n(15);function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t,e,n,r,o,a,c){try{var i=t[a](c),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}function O(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function c(t){E(a,r,o,c,i,"next",t)}function i(t){E(a,r,o,c,i,"throw",t)}c(void 0)})}}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function C(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var T=o.a.lazy(function(){return n.e(3).then(n.t.bind(null,599,7))}),S=o.a.lazy(function(){return n.e(6).then(n.bind(null,569))}),x=o.a.lazy(function(){return n.e(15).then(n.bind(null,679))}),R=function(t){function e(){var t,n,r,o,a,c,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var u=arguments.length,s=new Array(u),l=0;l<u;l++)s[l]=arguments[l];return r=this,n=!(o=(t=k(e)).call.apply(t,[this].concat(s)))||"object"!==w(o)&&"function"!=typeof o?C(r):o,a=C(n),i={submitting:!1,reacted:!1,reaction:""},(c="state")in a?Object.defineProperty(a,c,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[c]=i,n}var n,r,m;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}(e,o.a.Component),n=e,(r=[{key:"componentDidMount",value:function(){var t=O(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.match.params.id,t.next=3,this.props.getPost(e);case 3:if(t.sent.type===v.f){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,this.props.getComments(e);case 8:if(t.sent.type===v.e){t.next=11;break}return t.abrupt("return");case 11:this.props.getReactions(e);case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getPlaceholderContent",value:function(){var t=o.a.createElement(a.a,null,o.a.createElement(a.a.Paragraph,null,o.a.createElement(a.a.Line,null),o.a.createElement(a.a.Line,null),o.a.createElement(a.a.Line,null),o.a.createElement(a.a.Line,null),o.a.createElement(a.a.Line,null)),o.a.createElement(a.a.Paragraph,null,o.a.createElement(a.a.Line,null),o.a.createElement(a.a.Line,null),o.a.createElement(a.a.Line,null)));return o.a.createElement(o.a.Fragment,null,t,o.a.createElement(c.a.Group,null,o.a.createElement(i.a,{as:"h3",dividing:!0},"Comments"),t))}},{key:"reactPost",value:function(t){var e=this,n=this.props,r=n.auth,o=n.account,a=n.post;r.isAuth&&a.reactions&&o.user!==a.currentPost.userId&&this.setState({reacted:!0,reaction:t},O(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.props.submitReaction({postId:e.props.match.params.id,userId:o.user,reaction:t});case 2:if(n.sent.type===v.o){n.next=5;break}return n.abrupt("return");case 5:e.props.getReactions(e.props.match.params.id),e.setState({reacted:!1});case 7:case"end":return n.stop()}},n)})))}},{key:"getReactionButtons",value:function(){var t=this,e=this.props.post,n=e.currentPost,r=e.reactions;if(!n||!r)return o.a.createElement(a.a,{style:{height:40,width:200}},o.a.createElement(a.a.Image,null));var c=null,i=!1,l=!1,p=!1,f=!0,h=!1,m=void 0;try{for(var d,y=r[Symbol.iterator]();!(f=(d=y.next()).done);f=!0){var b=d.value;if(b.userId===this.props.account.user){c=b.reaction;break}}}catch(t){h=!0,m=t}finally{try{f||null==y.return||y.return()}finally{if(h)throw m}}switch(c){case"up":i=!0;break;case"down":l=!0;break;case"lol":p=!0}return o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{trigger:o.a.createElement(s.a,{color:"green",icon:"arrow alternate circle up outline",label:{basic:!0,color:"green",pointing:"left",content:n.up+("up"===this.state.reaction?1:0)},disabled:i||this.state.reacted,onClick:function(){t.reactPost("up")}}),content:"up"}),o.a.createElement(u.a,{trigger:o.a.createElement(s.a,{color:"red",icon:"arrow alternate circle down outline",label:{basic:!0,color:"red",pointing:"left",content:n.down+("down"===this.state.reaction?1:0)},disabled:l||this.state.reacted,onClick:function(){t.reactPost("down")}}),content:"down"}),o.a.createElement(u.a,{trigger:o.a.createElement(s.a,{color:"black",icon:"child",label:{basic:!0,color:"black",pointing:"left",content:n.lol+("lol"===this.state.reaction?1:0)},disabled:p||this.state.reacted,onClick:function(){t.reactPost("lol")}}),content:"lol"}))}},{key:"getContent",value:function(){var t=this,e=this.props.post,n=e.currentPost,r=e.comments,a=e.replyTo;if(!n)return this.getPlaceholderContent();var c=n.content,u=T;return o.a.createElement(o.a.Fragment,null,o.a.createElement(l.a,{textAlign:"left"},"b/",n.board,". Post by ",n.userId),o.a.createElement(i.a,{as:"h1"},n.title),o.a.createElement(l.a,null,o.a.createElement(l.a,{textAlign:"justified",style:{overflowX:"auto"}},o.a.createElement(u,{source:c})),o.a.createElement(p.a,{hidden:!0}),this.getReactionButtons(),o.a.createElement(p.a,null),!!r.length&&!!a&&o.a.createElement(f.a,{floating:!0,color:"yellow",content:"re: @".concat(r[a-1].userId," - ").concat(r[a-1].content)}),this.props.auth.isAuth&&o.a.createElement(g.a,{disabled:this.state.submitting,ButtonText:"Reply",onClick:function(e){var n={replyTo:t.props.post.replyTo,content:e,userId:t.props.account.user,postId:t.props.match.params.id};t.setState({submitting:!0},function(){t.props.submitComment(n).then(function(e){e.type===v.d&&(t.props.getComments(t.props.match.params.id),t.setState({submitting:!1}))})})}}),o.a.createElement(x,null)))}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(S,{showBackBtn:!0}),o.a.createElement(l.a,{textAlign:"left",style:{marginTop:"7em",marginBottom:"3em"}},o.a.createElement(h.a,null,this.getContent())))}}])&&j(n.prototype,r),m&&j(n,m),e}();e.default=Object(y.g)(Object(b.c)(function(t){return{auth:t.auth,account:t.account,post:t.post}},function(t){return{submitComment:function(e){return t(Object(d.a)(e))},submitReaction:function(e){return t(Object(d.c)(e))},getPost:function(e){return t(Object(m.b)(e))},getReactions:function(e){return t(Object(m.d)(e))},getComments:function(e){return t(Object(m.a)(e))}}})(R))}}]);